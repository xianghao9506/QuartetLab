<div class="qlg" aria-label="Gallery grid">
    {{ range sort (.Page.Resources.Match "*.{jpg,JPG,jpeg,JPEG,png,PNG,webp,WEBP}") "Name" }}
      <a class="qlg__item" href="{{ .RelPermalink }}" data-qlg-lightbox>
        <img src="{{ .RelPermalink }}" alt="{{ .Name }}" loading="lazy" />
      </a>
    {{ end }}
  </div>
  
  <!-- Lightbox -->
  <div class="qlg__lightbox" hidden>
    <button class="qlg__close" type="button" aria-label="Close">Ã—</button>
    <img class="qlg__lightboximg" alt="Expanded view" />
  </div>
  
  <script>
  (() => {
    const lb = document.querySelector(".qlg__lightbox");
    if (!lb) return;
  
    const img = lb.querySelector(".qlg__lightboximg");
    const closeBtn = lb.querySelector(".qlg__close");
  
    const open = (src) => {
      img.src = src;
      lb.hidden = false;
      document.documentElement.classList.add("qlg-noscroll");
    };
  
    const close = () => {
      lb.hidden = true;
      img.src = "";
      document.documentElement.classList.remove("qlg-noscroll");
    };
  
    document.addEventListener("click", (e) => {
      const a = e.target.closest("[data-qlg-lightbox]");
      if (a) {
        e.preventDefault();
        open(a.getAttribute("href"));
        return;
      }
      if (e.target === lb || e.target === closeBtn) close();
    });
  
    document.addEventListener("keydown", (e) => {
      if (!lb.hidden && e.key === "Escape") close();
    });
  })();
  </script>
  